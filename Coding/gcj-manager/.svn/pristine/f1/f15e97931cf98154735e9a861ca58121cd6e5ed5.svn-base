
//添加任务模块
function addModel(taskId){
	var name = $(".taskName").val();
	var ptime = $(".taskPtime").val();
	var etime = $(".taskEtime").val();
	var desc = $(".taskDesc").val();
	var price = $(".taskPrice").val();
	
	ptime = new Date(ptime);
	etime = new Date(etime);
	
	var url = "/page/task_model/add";
	var datas = {
		"taskId":taskId,
		"title":name,
		"ptime":ptime,
		"etime":etime,
		"desc":desc,
		"price":price
	};
	var result = function(data){
		Popups(data.msg,function(){
			if(data.code == 200){
				$(".popup-mokuaijia,.zhezhao").addClass("dis-none");
				window.history.go(0);
			}
		});
		
	}
	sendPost(url,datas,result);
}


//发布任务信息
function fabugonggao(taskId){
	var contents = $(".contents").val();
	var url = "/page/taskmsg/add";
	var datas = {
		"taskId":taskId,
		"contents":contents
	};
	var result = function(data){
		Popups(data.msg,function(){
			if(data.code == 200){
				$(".fbgg-popup,.zhezhao").addClass("dis-none");
				window.history.go(0);
			}
		});
	}
	sendPost(url,datas,result);
}

//添加任务评价信息
function epcs(taskId){
	
	var evaluation = $('.evaluation[name="ping"]:checked').val();
	var epcsReason = $(".epcsReason").val();
	var eContents = $(".eContents").val();
	var url = "/page/epcs/pcs";
	var datas = {
		"taskId":taskId,
		"evaluation":evaluation,
		"epcsReason":epcsReason,
		"eContent":eContents
	};
	
	var result = function(data){
		Popups(data.msg,function(){
			if(data.code == 200 || data.code == 502){
				$(".popup-evaluate,.zhezhao").addClass("dis-none");
			}else{
				window.location.href = "/index";
			}
		});
	}
	sendPost(url,datas,result);
}

//添加服务商评论信息
function spcs(taskId){
	var svaluation = $('.svaluation[name="ping"]:checked').val();
	var spcsReason = $(".spcsReason").val();
	var sContents = $(".sContents").val();
	
	var url = "/page/spcs/pcs";
	var datas = {
		"svaluation":svaluation,
		"spcsReason":spcsReason,
		"sContents":sContents,
		"taskId":taskId
	}
	var result = function(data){
		Popups(data.msg,function(){
			if(data.code == 200){
				
			}
		});
	}
	sendPost(url,datas,result);
}


//添加任务付款模块
function addTaskPM(taskId){
	var name = $(".taskPmName").val();
	var price = $(".taskPmPrice").val();
	
	if(name == null || name == ""){
		Popups("请输入付款说明！");
		return;
	}
	if(price == ""){
		Popups("请输入金额！");
		return;
	}
	var zx = /^[0-9]*$/;
	if(!zx.test(price)){
		Popups("金额输入有误！");
		return;
	}
	
	var url = "/page/taskPM/insert";
	var datas = {
		"taskId":taskId,
		"name":name,
		"description":name,
		"price":price
	}
	var result = function(data){
		Popups(data.msg,function(){
			if(data.code == 200){
				$(".popup-fukuanjia,.zhezhao").addClass("dis-none");
				window.history.go(0);
			}
		});
	}
	sendPost(url,datas,result);
}

//服务商向服务商申请托管资金
function stgsq(userId,taskId,tpmId){
	if(window.confirm("确定提交申请吗？")){
		var url = "/page/taskPM/hostingApplication";
		var datas = {
			"userId":userId,
			"taskId":taskId,
			"tpmId":tpmId
		}
		var result = function(data){
			Popups(data.msg,function(){
				
			});
		}
		sendPost(url,datas,result);
	}
}
