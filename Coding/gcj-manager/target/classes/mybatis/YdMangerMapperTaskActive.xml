<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yd.gcj.mapper.YdMangerMapperTaskActive">
	
	<select id="$queryByTid" resultType="com.yd.gcj.entity.vo.YdMangerTaskActiveVo">
		SELECT 
			taska_id,taska_tid,taska_auid,taska_buid,taska_contents,taska_group,taska_create_time
			,u.`user_nickname` AS nickname,u.`user_ename` AS ename,u.`user_type` AS `type`
		FROM 
			yd_task_active active
			LEFT JOIN yd_user u ON active.`taska_auid` = u.`user_id`
		where 
			taska_tid = #{taskId}
			ORDER BY taska_group,taska_create_time
	</select>
	
	<insert id="$insert" parameterType="com.yd.gcj.entity.YdMangerTaskActive">
		CALL procedure_task_active(#{taska_tid},#{taska_auid},#{taska_buid},#{taska_contents},#{taska_group},#{taska_create_time})
	</insert>
	
	<delete id="$delete" parameterType="java.lang.Integer">
		delete from yd_taska
		where taska_id = #{taska_id}
	</delete>
	
</mapper>

