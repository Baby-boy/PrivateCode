<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yd.gcj.mapper.YdMangerMapperTaskLabel">
	
	<select id="$queryByTid" parameterType="java.lang.Integer" resultType="com.yd.gcj.entity.YdMangerTaskLabel">
		select
			taskl_tid,taskl_lid,taskl_type,taskl_name,taskl_pid
		from 
			yd_task_label
		where 
			taskl_tid = #{taskId} and taskl_type = 1
	</select>
	
	<select id="$queryIdByTid" resultType="java.lang.Integer">
		select
			taskl_lid
		from 
			yd_task_label
		where 
			taskl_tid = #{taskId}
	</select>
	
	<select id="$queryByTids" resultType="com.yd.gcj.entity.YdMangerTaskLabel">
		select
			taskl_tid,taskl_lid,taskl_type,taskl_name
		from 
			yd_task_label
		where 
			taskl_tid in (<foreach collection="tids" item="item" index="index" separator=",">#{item}</foreach>)
			and taskl_type = 1
	</select>
	
	<select id="$queryById" parameterType="java.lang.Integer" resultType="com.yd.gcj.entity.YdMangerTaskLabel">
		select 
			taskl_tid,taskl_lid,taskl_type,taskl_name,taskl_desc
		from 
			yd_task_label
		where 
			taskl_id = #{taskl_id}
	</select>
	
	<insert id="$insert" parameterType="com.yd.gcj.entity.YdMangerTaskLabel">
	
		INSERT INTO yd_task_label (taskl_tid,taskl_lid,taskl_type,taskl_name,taskl_pid)
		VALUE
		(#{taskId},#{labelId},
		(SELECT label_type FROM yd_label WHERE label_id = #{labelId}),
		(SELECT label_name FROM yd_label WHERE label_id = #{labelId}),
		(SELECT label_pid FROM yd_label WHERE label_id = #{labelId}))
	</insert>
	
	<delete id="$deleteByTaskId">
		delete from yd_task_label
		where taskl_tid = #{taskId}
	</delete>
	
</mapper>

