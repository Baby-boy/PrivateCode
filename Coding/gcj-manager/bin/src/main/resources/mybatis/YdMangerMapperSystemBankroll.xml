<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yd.gcj.system.mapper.YdMangerMapperSystemBankroll">
	
	<select id="queryUserRechargeRecord" resultType="com.yd.gcj.entity.vo.YdMangerBankTRVo" >
		SELECT ybtr.*,ybtr.btr_type as btrType,yu.user_id,yu.user_account,yu.user_name,yu.user_cprice,yu.user_nickname as nickname,yu.user_phone,yu.user_email,yb.bank_name FROM yd_bank_t_r ybtr
		LEFT JOIN yd_user yu ON ybtr.btr_uid = yu.user_id
		LEFT JOIN yd_bank yb ON ybtr.btr_account = yb.bank_number
		where ybtr.btr_type = 0
		<if test="user_name !=null and user_name != ''">
			and user_name like  CONCAT(CONCAT('%', #{user_name, jdbcType=VARCHAR}),'%')
		</if>
		<if test="user_phone !=null and user_phone != ''">
			and user_phone like  CONCAT(CONCAT('%', #{user_phone, jdbcType=VARCHAR}),'%')
		</if>
	</select>
</mapper>