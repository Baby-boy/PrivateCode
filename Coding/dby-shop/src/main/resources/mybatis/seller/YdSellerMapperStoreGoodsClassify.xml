<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yd.dby.d.seller.mapper.YdSellerMapperStoreGoodsClassify">
	<sql id="listWhere">
		 where store_id = #{store_id}
	</sql>
	
	<select id="one" resultMap="YdWebMapperSellerStoreGoodsClassifyList">
		SELECT * FROM yd_store_goods_classify
		<include refid="listWhere"></include>
		 and pid = 0;
	</select>
	
	<select id="info" resultType="com.yd.dby.d.seller.entity.YdSellerStoreGoodsClassify">
		SELECT
			sc_id, store_id, sort, is_show, pid, title
		FROM
			yd_store_goods_classify
		WHERE
			sc_id = #{scId}
	</select>
	
	<select id="index" resultMap="YdWebMapperSellerStoreGoodsClassifyList">
		SELECT * FROM yd_store_goods_classify
		<include refid="listWhere"></include>
		ORDER BY pid ASC
	</select>
	
	<select id="sonCount" resultType="java.lang.Integer">
		SELECT
			count(*)
		FROM
			yd_store_goods_classify
		WHERE
			pid = #{sc_id}
	</select>
	
	<resultMap id="YdWebMapperSellerStoreGoodsClassifyList" type="java.util.HashMap">
		<result property="sc_id" column="sc_id"/>
		<result property="store_id" column="store_id"/>
		<result property="sort" column="sort"/>
		<result property="is_show" column="is_show"/>
		<result property="pid" column="pid"/>
		<result property="title" column="title"/>
	</resultMap>
	
	
	<insert id="store" parameterType="com.yd.dby.d.seller.entity.YdSellerStoreGoodsClassify">
		INSERT yd_store_goods_classify
			(store_id, sort, is_show, pid, title)
		value
			( #{store_id}, #{sort}, #{is_show}, #{pid}, #{title} );
	</insert>
	
	<select id="edit" resultMap="YdWebMapperSellerStoreGoodsClassifyList">
		SELECT * FROM yd_store_goods_classify <include refid="listWhere"></include> and sc_id = #{id};
	</select>
	
	<update id="update">
		UPDATE
			yd_store_goods_classify
		SET
			sort 		= #{sort},
			is_show 	= #{is_show},
			pid 		= #{pid},
			title		= #{title}
		<include refid="listWhere"></include> 
		and sc_id = #{sc_id}
	</update>
	
	<update id="setShow">
		UPDATE
			yd_store_goods_classify
		SET
			is_show = #{isShow}
		<include refid="listWhere"></include> 
		and sc_id = #{id}
	</update>
	
	<delete id="destroy">
		delete from yd_store_goods_classify <include refid="listWhere"></include> and sc_id = #{id};
		delete from yd_store_goods_classify <include refid="listWhere"></include> and pid = #{id};
	</delete>
</mapper>